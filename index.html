<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>Dependency Injection in Nameko</title>

        <meta name="description" content="A talk for Pycon UK 2014">
        <meta name="author" content="Matt Bennett">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <link rel="stylesheet" href="css/reveal.min.css">
        <link rel="stylesheet" href="css/theme/night.css" id="theme">
        <link rel="stylesheet" href="css/custom.css">

        <!-- For syntax highlighting -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

        <!-- If the query includes 'print-pdf', include the PDF print sheet -->
        <script>
            if( window.location.search.match( /print-pdf/gi ) ) {
                var link = document.createElement( 'link' );
                link.rel = 'stylesheet';
                link.type = 'text/css';
                link.href = 'css/print/pdf.css';
                document.getElementsByTagName( 'head' )[0].appendChild( link );
            }
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="reveal">

            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">
                <section>
                    <h2>Dependency Injection</h2>
                    <h2>in</h2>
                    <h2>Nameko</h2>
                    <h3></h3>
                    <p>
                        <small style="position: relative; top: 250px">
                            Matt Bennett ~ Senior Engineer ~ onefinestay
                        </small>
                    </p>

                    <aside class="notes">
                        <ul>
                            <li>Hello</li>
                            <li>Thanks</li>
                            <li>Show of hands</li>
                        </ul>
                    </aside>
                </section>

                <section>
                    <h2>Dependency Injection</h2>
                    <blockquote>
                        Design pattern whereby an object's dependencies are injected or passed by reference into it, rather than constructed by the object.
                    </blockquote>
                    <div class="container">
                        <div class="half">
                            <pre>
                                <code class="python" data-trim>
class Widget(object):
    def __init__(self):
        self.session = get_db_session()
                                </code>
                            </pre>
                        </div>
                        <div class="half">
                            <pre>
                                <code class="python" data-trim>
class Widget(object):
    def __init__(self, session):
        self.session = session
                                </code>
                            </pre>
                        </div>
                    </div>
                    <p class="fragment">Pretty simple</p>
                    <aside class="notes">
                        <ul>
                            <li>On the left: trivial code constructs a database session, saves as instance variable</li>
                            <li>On the right, same code with dependency injection</li>
                        </ul>
                        <ul>
                            <li>Simple</li>
                            <li>But the principal is interesting</li>
                        </ul>
                    </aside>
                </section>

                <section>
                    <h2>Nameko</h2>
                    <h3>Python framework for building service-oriented software</h3>
                    <div style="margin: 50px">
                        <svg
                           xmlns:dc="http://purl.org/dc/elements/1.1/"
                           xmlns:cc="http://creativecommons.org/ns#"
                           xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                           xmlns:svg="http://www.w3.org/2000/svg"
                           xmlns="http://www.w3.org/2000/svg"
                           xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
                           xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
                           width="846.26379"
                           height="325.62"
                           id="svg2"
                           version="1.1"
                           inkscape:version="0.48.5 r10040"
                           sodipodi:docname="drawingplain.svg">
                          <sodipodi:namedview
                             id="base"
                             pagecolor="#000000"
                             bordercolor="#666666"
                             borderopacity="1.0"
                             inkscape:pageopacity="0.39215686"
                             inkscape:pageshadow="2"
                             inkscape:zoom="2.0650181"
                             inkscape:cx="319.33624"
                             inkscape:cy="168.17971"
                             inkscape:document-units="px"
                             inkscape:current-layer="layer1"
                             showgrid="false"
                             inkscape:window-width="1791"
                             inkscape:window-height="1132"
                             inkscape:window-x="0"
                             inkscape:window-y="0"
                             inkscape:window-maximized="0"
                             showguides="true"
                             inkscape:guide-bbox="true"
                             fit-margin-top="0"
                             fit-margin-left="0"
                             fit-margin-right="0"
                             fit-margin-bottom="0">
                            <sodipodi:guide
                               id="guide3030"
                               position="413.62533,342.39201"
                               orientation="0,1" />
                            <sodipodi:guide
                               id="guide3032"
                               position="71.473101,464.81348"
                               orientation="1,0" />
                          </sodipodi:namedview>
                          <defs
                             id="defs4">
                            <marker
                               inkscape:stockid="Arrow2Lend"
                               orient="auto"
                               refY="0"
                               refX="0"
                               id="Arrow2Lend"
                               style="overflow:visible">
                              <path
                                 id="path4328"
                                 style="fill-rule:evenodd;stroke-width:0.625;stroke-linejoin:round"
                                 d="M 8.7185878,4.0337352 -2.2072895,0.01601326 8.7185884,-4.0017078 c -1.7454984,2.3720609 -1.7354408,5.6174519 -6e-7,8.035443 z"
                                 transform="matrix(-1.1,0,0,-1.1,-1.1,0)"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               inkscape:stockid="Tail"
                               orient="auto"
                               refY="0"
                               refX="0"
                               id="Tail"
                               style="overflow:visible">
                              <g
                                 id="g4343"
                                 transform="scale(-1.2,-1.2)">
                                <path
                                   id="path4345"
                                   d="M -3.8048674,-3.9585227 0.54352094,0"
                                   style="fill:none;stroke:#000000;stroke-width:0.80000001;stroke-linecap:round"
                                   inkscape:connector-curvature="0" />
                                <path
                                   id="path4347"
                                   d="M -1.2866832,-3.9585227 3.0617053,0"
                                   style="fill:none;stroke:#000000;stroke-width:0.80000001;stroke-linecap:round"
                                   inkscape:connector-curvature="0" />
                                <path
                                   id="path4349"
                                   d="M 1.3053582,-3.9585227 5.6537466,0"
                                   style="fill:none;stroke:#000000;stroke-width:0.80000001;stroke-linecap:round"
                                   inkscape:connector-curvature="0" />
                                <path
                                   id="path4351"
                                   d="M -3.8048674,4.1775838 0.54352094,0.21974226"
                                   style="fill:none;stroke:#000000;stroke-width:0.80000001;stroke-linecap:round"
                                   inkscape:connector-curvature="0" />
                                <path
                                   id="path4353"
                                   d="M -1.2866832,4.1775838 3.0617053,0.21974226"
                                   style="fill:none;stroke:#000000;stroke-width:0.80000001;stroke-linecap:round"
                                   inkscape:connector-curvature="0" />
                                <path
                                   id="path4355"
                                   d="M 1.3053582,4.1775838 5.6537466,0.21974226"
                                   style="fill:none;stroke:#000000;stroke-width:0.80000001;stroke-linecap:round"
                                   inkscape:connector-curvature="0" />
                              </g>
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Sstart"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Sstart">
                              <path
                                 transform="matrix(0.2,0,0,0.2,1.2,0)"
                                 style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path4319"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend">
                              <path
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path4316"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Lend"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Lend">
                              <path
                                 transform="matrix(-0.8,0,0,-0.8,-10,0)"
                                 style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path4310"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend-0"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend">
                              <path
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path4316-9"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend-1"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend">
                              <path
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path4316-5"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend5"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend5">
                              <path
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6345"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend-1n"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend-1n">
                              <path
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6415"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1MendC"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1MendC">
                              <path
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6486"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend5-2"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend5">
                              <path
                                 inkscape:connector-curvature="0"
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6345-2" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1MendC-6"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1MendC">
                              <path
                                 inkscape:connector-curvature="0"
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6486-6" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1MendC-9"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1MendC">
                              <path
                                 inkscape:connector-curvature="0"
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6486-4" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend-1n-8"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend-1n">
                              <path
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6415-5"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend5-1"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend5">
                              <path
                                 inkscape:connector-curvature="0"
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6345-5" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend-1n-4"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend-1n">
                              <path
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6415-0"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend5-8"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend5">
                              <path
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6345-8"
                                 inkscape:connector-curvature="0" />
                            </marker>
                          </defs>
                          <metadata
                             id="metadata7">
                            <rdf:RDF>
                              <cc:Work
                                 rdf:about="">
                                <dc:format>image/svg+xml</dc:format>
                                <dc:type
                                   rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
                                <dc:title></dc:title>
                              </cc:Work>
                            </rdf:RDF>
                          </metadata>
                          <g
                             transform="translate(148.90204,-101.27237)"
                             id="layer1"
                             inkscape:groupmode="layer"
                             inkscape:label="Layer 1">
                            <text
                               sodipodi:linespacing="125%"
                               id="text3270"
                               y="415.14822"
                               x="90.405571"
                               style="font-size:40px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#ffffff;fill-opacity:1;stroke:none;font-family:Sans"
                               xml:space="preserve"><tspan
                                 style="font-size:22px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;writing-mode:lr-tb;text-anchor:start;fill:#ffffff;fill-opacity:1;stroke:none;font-family:'Open Sans';-inkscape-font-specification:Sans"
                                 y="422.14822"
                                 x="84.405571"
                                 id="tspan3272"
                                 sodipodi:role="line">Bookings</tspan></text>
                            <text
                               sodipodi:linespacing="125%"
                               id="text3270-9"
                               y="415.14822"
                               x="230.61002"
                               style="font-size:40px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#ffffff;fill-opacity:1;stroke:none;font-family:Sans"
                               xml:space="preserve"><tspan
                                 style="font-size:22px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;writing-mode:lr-tb;text-anchor:start;fill:#ffffff;fill-opacity:1;stroke:none;font-family:'Open Sans';-inkscape-font-specification:Sans"
                                 y="422.14822"
                                 x="225.61002"
                                 id="tspan3272-5"
                                 sodipodi:role="line">Payments</tspan></text>
                            <text
                               sodipodi:linespacing="125%"
                               id="text3270-9-7"
                               y="415.14822"
                               x="390.81445"
                               style="font-size:40px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#ffffff;fill-opacity:1;stroke:none;font-family:Sans"
                               xml:space="preserve"><tspan
                                 style="font-size:22px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;writing-mode:lr-tb;text-anchor:start;fill:#ffffff;fill-opacity:1;stroke:none;font-family:'Open Sans';-inkscape-font-specification:Sans"
                                 y="422.14822"
                                 x="384.81445"
                                 id="tspan3272-5-5"
                                 sodipodi:role="line">Homes</tspan></text>
                            <rect
                               y="287.93564"
                               x="55.899776"
                               height="71.664482"
                               width="441.41971"
                               id="rect3345"
                               style="fill:none;stroke:#ffffff;stroke-width:3;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:12, 6;stroke-dashoffset:0" />
                            <path
                               inkscape:connector-curvature="0"
                               id="path4121"
                               d="m 172.42176,301.09274 60.20947,0.13322 0.15649,0 0.15646,0"
                               style="fill:none;stroke:#ffffff;stroke-width:2.30599999;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;marker-start:none;marker-mid:none;marker-end:url(#Arrow1Mend5)" />
                            <path
                               inkscape:connector-curvature="0"
                               id="path4121-5"
                               d="m 172.66717,341.1846 204.14804,-0.13322 0.53059,0 0.53051,0"
                               style="fill:none;stroke:#ffffff;stroke-width:2.18305445;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;marker-start:none;marker-end:url(#Arrow1MendC)" />
                            <path
                               inkscape:connector-curvature="0"
                               id="path4959"
                               d="m 617.25575,286.93009 c 8.69078,0 15.94018,5.27341 17.83933,12.36292 5.08076,-5.04389 11.85776,-8.11387 19.27962,-8.11387 13.0704,0 24.06321,9.55253 27.4665,22.57871 4.1e-4,7.4e-4 0.0248,-7.4e-4 0.0252,0 7.92701,1.44378 13.69535,5.77686 13.69535,10.89384 0,5.49493 -6.62819,10.08474 -15.46412,11.16506 -4.63122,10.37001 -14.40911,17.51601 -25.723,17.51601 -5.35296,0 -10.37256,-1.6001 -14.65554,-4.38464 -2.53665,3.49818 -7.56027,5.89894 -13.36687,5.89894 -6.40505,0 -11.86649,-2.90921 -14.07437,-7.00641 -3.62293,1.43593 -7.63296,2.23753 -11.85077,2.23753 -16.17097,0 -29.28581,-11.73067 -29.28581,-26.19493 0,-14.30341 12.83258,-25.91556 28.75518,-26.17233 2.48661,-6.28233 9.32541,-10.78083 17.35923,-10.78083 z"
                               style="fill:none;stroke:#ffffff;stroke-width:3.5999999;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />
                            <path
                               inkscape:connector-curvature="0"
                               id="path4121-0"
                               d="m 236.43964,309.3113 -60.20947,0.13322 -0.15649,0 -0.15646,0"
                               style="fill:none;stroke:#ffffff;stroke-width:2.30599999;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;marker-start:none;marker-end:url(#Arrow1Mend-1n)" />
                            <rect
                               y="115.77353"
                               x="239.18253"
                               height="272.99771"
                               width="73.753418"
                               id="rect3212-2"
                               style="fill:#000000;fill-opacity:1;stroke:#ffffff;stroke-width:3;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />
                            <path
                               inkscape:connector-curvature="0"
                               id="path4121-1"
                               d="m 500.82118,320.47512 60.20947,0.13322 0.15649,0 0.15646,0"
                               style="fill:none;stroke:#ffffff;stroke-width:2.30599999;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;marker-start:none;marker-mid:none;marker-end:url(#Arrow1Mend5)" />
                            <path
                               inkscape:connector-curvature="0"
                               id="path4121-0-3"
                               d="m 564.83906,328.69368 -60.20947,0.13322 -0.15649,0 -0.15646,0"
                               style="fill:none;stroke:#ffffff;stroke-width:2.30599999;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;marker-start:none;marker-end:url(#Arrow1Mend-1n)" />
                            <rect
                               y="115.77353"
                               x="94.978081"
                               height="272.99771"
                               width="73.753418"
                               id="rect3212"
                               style="fill:#000000;fill-opacity:1;stroke:#ffffff;stroke-width:3;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />
                            <rect
                               y="115.77353"
                               x="383.38696"
                               height="272.99771"
                               width="73.753418"
                               id="rect3212-2-3"
                               style="fill:#000000;fill-opacity:1;stroke:#ffffff;stroke-width:3;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />
                          </g>
                        </svg>
                    </div>

                    <div class="fragment">
                        <ul>
                            <li>Open-source software</li>
                            <li>Active development on GitHub</li>
                    </div>
                    <aside class="notes">
                        <ul>
                            <li>Easier explained with a diagram</li>
                            <li>Introduce onefinestay</li>
                            <li>Simplified view of our world has three logical block</li>
                            <li>Nameko is the dotted line here - the glue that lets services communicate with each other and the outside world.</li>
                        </ul>
                    </aside>
                </section>

                <section>

                    <h2>Nameko out of the box</h2>
                    <p>Everything you need to do:</p>
                    <ul>
                        <li>AMQP <span style="color:#f92672;">RPC</span></li>
                        <li>AMQP <span style="color:#a6e22e;">Pub-Sub</span></li>
                    </ul>
                    <div style="margin: 50px">
                        <svg
                           xmlns:dc="http://purl.org/dc/elements/1.1/"
                           xmlns:cc="http://creativecommons.org/ns#"
                           xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                           xmlns:svg="http://www.w3.org/2000/svg"
                           xmlns="http://www.w3.org/2000/svg"
                           xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
                           xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
                           width="846.26379"
                           height="325.62"
                           id="svg2"
                           version="1.1"
                           inkscape:version="0.48.5 r10040"
                           sodipodi:docname="matt.svg">
                          <sodipodi:namedview
                             id="base"
                             pagecolor="#000000"
                             bordercolor="#666666"
                             borderopacity="1.0"
                             inkscape:pageopacity="0.39215686"
                             inkscape:pageshadow="2"
                             inkscape:zoom="34.224664"
                             inkscape:cx="299.3139"
                             inkscape:cy="128.18486"
                             inkscape:document-units="px"
                             inkscape:current-layer="layer1"
                             showgrid="false"
                             inkscape:window-width="1791"
                             inkscape:window-height="1132"
                             inkscape:window-x="1982"
                             inkscape:window-y="62"
                             inkscape:window-maximized="0"
                             showguides="true"
                             inkscape:guide-bbox="true"
                             fit-margin-top="0"
                             fit-margin-left="0"
                             fit-margin-right="0"
                             fit-margin-bottom="0">
                            <sodipodi:guide
                               id="guide3030"
                               position="413.62533,342.39201"
                               orientation="0,1" />
                            <sodipodi:guide
                               id="guide3032"
                               position="71.473101,464.81348"
                               orientation="1,0" />
                          </sodipodi:namedview>
                          <defs
                             id="defs4">
                            <marker
                               inkscape:stockid="Arrow2Lend"
                               orient="auto"
                               refY="0"
                               refX="0"
                               id="Arrow2Lend"
                               style="overflow:visible">
                              <path
                                 id="path4328"
                                 style="fill-rule:evenodd;stroke-width:0.625;stroke-linejoin:round"
                                 d="M 8.7185878,4.0337352 -2.2072895,0.01601326 8.7185884,-4.0017078 c -1.7454984,2.3720609 -1.7354408,5.6174519 -6e-7,8.035443 z"
                                 transform="matrix(-1.1,0,0,-1.1,-1.1,0)"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               inkscape:stockid="Tail"
                               orient="auto"
                               refY="0"
                               refX="0"
                               id="Tail"
                               style="overflow:visible">
                              <g
                                 id="g4343"
                                 transform="scale(-1.2,-1.2)">
                                <path
                                   id="path4345"
                                   d="M -3.8048674,-3.9585227 0.54352094,0"
                                   style="fill:none;stroke:#000000;stroke-width:0.80000001;stroke-linecap:round"
                                   inkscape:connector-curvature="0" />
                                <path
                                   id="path4347"
                                   d="M -1.2866832,-3.9585227 3.0617053,0"
                                   style="fill:none;stroke:#000000;stroke-width:0.80000001;stroke-linecap:round"
                                   inkscape:connector-curvature="0" />
                                <path
                                   id="path4349"
                                   d="M 1.3053582,-3.9585227 5.6537466,0"
                                   style="fill:none;stroke:#000000;stroke-width:0.80000001;stroke-linecap:round"
                                   inkscape:connector-curvature="0" />
                                <path
                                   id="path4351"
                                   d="M -3.8048674,4.1775838 0.54352094,0.21974226"
                                   style="fill:none;stroke:#000000;stroke-width:0.80000001;stroke-linecap:round"
                                   inkscape:connector-curvature="0" />
                                <path
                                   id="path4353"
                                   d="M -1.2866832,4.1775838 3.0617053,0.21974226"
                                   style="fill:none;stroke:#000000;stroke-width:0.80000001;stroke-linecap:round"
                                   inkscape:connector-curvature="0" />
                                <path
                                   id="path4355"
                                   d="M 1.3053582,4.1775838 5.6537466,0.21974226"
                                   style="fill:none;stroke:#000000;stroke-width:0.80000001;stroke-linecap:round"
                                   inkscape:connector-curvature="0" />
                              </g>
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Sstart"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Sstart">
                              <path
                                 transform="matrix(0.2,0,0,0.2,1.2,0)"
                                 style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path4319"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend">
                              <path
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path4316"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Lend"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Lend">
                              <path
                                 transform="matrix(-0.8,0,0,-0.8,-10,0)"
                                 style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path4310"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend-0"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend">
                              <path
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path4316-9"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend-1"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend">
                              <path
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path4316-5"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend5"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend5">
                              <path
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6345"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend-1n"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend-1n">
                              <path
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6415"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1MendC"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1MendC">
                              <path
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6486"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend5-2"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend5">
                              <path
                                 inkscape:connector-curvature="0"
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6345-2" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1MendC-6"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1MendC">
                              <path
                                 inkscape:connector-curvature="0"
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6486-6" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1MendC-9"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1MendC">
                              <path
                                 inkscape:connector-curvature="0"
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6486-4" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend-1n-8"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend-1n">
                              <path
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6415-5"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend5-1"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend5">
                              <path
                                 inkscape:connector-curvature="0"
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6345-5" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend-1n-4"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend-1n">
                              <path
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6415-0"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend5-8"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend5">
                              <path
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6345-8"
                                 inkscape:connector-curvature="0" />
                            </marker>
                          </defs>
                          <metadata
                             id="metadata7">
                            <rdf:RDF>
                              <cc:Work
                                 rdf:about="">
                                <dc:format>image/svg+xml</dc:format>
                                <dc:type
                                   rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
                                <dc:title />
                              </cc:Work>
                            </rdf:RDF>
                          </metadata>
                          <g
                             transform="translate(148.90204,-101.27237)"
                             id="layer1"
                             inkscape:groupmode="layer"
                             inkscape:label="Layer 1">
                            <text
                               sodipodi:linespacing="125%"
                               id="text3270"
                               y="415.14822"
                               x="90.405571"
                               style="font-size:40px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#ffffff;fill-opacity:1;stroke:none;font-family:Sans"
                               xml:space="preserve"><tspan
                                 style="font-size:22px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;writing-mode:lr-tb;text-anchor:start;fill:#ffffff;fill-opacity:1;stroke:none;font-family:'Open Sans';-inkscape-font-specification:Sans"
                                 y="422.14822"
                                 x="84.405571"
                                 id="tspan3272"
                                 sodipodi:role="line">Bookings</tspan></text>
                            <text
                               sodipodi:linespacing="125%"
                               id="text3270-9"
                               y="415.14822"
                               x="230.61002"
                               style="font-size:40px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#ffffff;fill-opacity:1;stroke:none;font-family:Sans"
                               xml:space="preserve"><tspan
                                 style="font-size:22px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;writing-mode:lr-tb;text-anchor:start;fill:#ffffff;fill-opacity:1;stroke:none;font-family:'Open Sans';-inkscape-font-specification:Sans"
                                 y="422.14822"
                                 x="225.61002"
                                 id="tspan3272-5"
                                 sodipodi:role="line">Payments</tspan></text>
                            <text
                               sodipodi:linespacing="125%"
                               id="text3270-9-7"
                               y="415.14822"
                               x="390.81445"
                               style="font-size:40px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#ffffff;fill-opacity:1;stroke:none;font-family:Sans"
                               xml:space="preserve"><tspan
                                 style="font-size:22px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;writing-mode:lr-tb;text-anchor:start;fill:#ffffff;fill-opacity:1;stroke:none;font-family:'Open Sans';-inkscape-font-specification:Sans"
                                 y="422.14822"
                                 x="384.81445"
                                 id="tspan3272-5-5"
                                 sodipodi:role="line">Homes</tspan></text>
                            <rect
                               y="287.93564"
                               x="55.899776"
                               height="71.664482"
                               width="441.41971"
                               id="rect3345"
                               style="fill:none;stroke:#ffffff;stroke-width:3;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:12, 6;stroke-dashoffset:0" />
                            <g
                               id="g12213"
                               style="stroke:none;fill:#a6e22e;fill-opacity:1">
                              <path
                                 style="font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:normal;letter-spacing:normal;word-spacing:normal;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;baseline-shift:baseline;color:#000000;fill:#a6e22e;fill-opacity:1;stroke:none;stroke-width:2.18305445;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Sans;-inkscape-font-specification:Sans"
                                 d="m 370.8125,339.96875 -198.15625,0.125 c -0.57269,0 -1.09375,0.52106 -1.09375,1.09375 0,0.57269 0.52106,1.09375 1.09375,1.09375 l 198.15625,-0.125 0.53125,0 0.53125,0 c 0.57269,0 7.09375,-0.52106 7.09375,-1.09375 0,-0.57269 -6.52106,-1.09375 -7.09375,-1.09375 l -0.53125,0 z"
                                 id="path4121-5"
                                 inkscape:connector-curvature="0"
                                 sodipodi:nodetypes="ccscccssscc" />
                              <path
                                 inkscape:connector-curvature="0"
                                 id="path12219"
                                 d="m 369.14409,341.05138 -4.36611,4.36611 15.28138,-4.36611 -15.28138,-4.36611 4.36611,4.36611 z"
                                 style="fill:#a6e22e;fill-rule:evenodd;stroke:none;stroke-width:0.87322177999999984pt;fill-opacity:1" />
                            </g>
                            <path
                               inkscape:connector-curvature="0"
                               id="path4959"
                               d="m 617.25575,286.93009 c 8.69078,0 15.94018,5.27341 17.83933,12.36292 5.08076,-5.04389 11.85776,-8.11387 19.27962,-8.11387 13.0704,0 24.06321,9.55253 27.4665,22.57871 4.1e-4,7.4e-4 0.0248,-7.4e-4 0.0252,0 7.92701,1.44378 13.69535,5.77686 13.69535,10.89384 0,5.49493 -6.62819,10.08474 -15.46412,11.16506 -4.63122,10.37001 -14.40911,17.51601 -25.723,17.51601 -5.35296,0 -10.37256,-1.6001 -14.65554,-4.38464 -2.53665,3.49818 -7.56027,5.89894 -13.36687,5.89894 -6.40505,0 -11.86649,-2.90921 -14.07437,-7.00641 -3.62293,1.43593 -7.63296,2.23753 -11.85077,2.23753 -16.17097,0 -29.28581,-11.73067 -29.28581,-26.19493 0,-14.30341 12.83258,-25.91556 28.75518,-26.17233 2.48661,-6.28233 9.32541,-10.78083 17.35923,-10.78083 z"
                               style="fill:none;stroke:#ffffff;stroke-width:3.5999999;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />
                            <g
                               id="g11565"
                               style="fill:#f92672;fill-opacity:1;stroke:#f92672;stroke-opacity:1">
                              <g
                                 id="g12197"
                                 style="stroke:none;stroke-opacity:1;fill:#f92672;fill-opacity:1">
                                <path
                                   style="font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:normal;letter-spacing:normal;word-spacing:normal;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;baseline-shift:baseline;color:#000000;fill:#f92672;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:2.30599999;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Sans;-inkscape-font-specification:Sans"
                                   d="m 172.3125,299.9375 c -0.60596,0.0237 -1.1355,0.59724 -1.11095,1.20316 0.0246,0.60593 0.59876,1.1347 1.20465,1.10934 l 54.21875,0.125 0.15625,0 0.15625,0 c 0.60541,0 1.15625,-0.55084 1.15625,-1.15625 0,-0.60541 -1.76166,-1.15625 -1.15625,-1.15625 l -0.15625,0 -0.15625,0 -54.1875,-0.125 c -0.0416,-0.002 -0.0834,-0.002 -0.125,0 z"
                                   id="path4121"
                                   inkscape:connector-curvature="0"
                                   sodipodi:nodetypes="cscccsssccccc" />
                                <path
                                   inkscape:connector-curvature="0"
                                   id="path12203"
                                   d="m 223.72018,301.22596 -4.612,4.612 16.142,-4.612 -16.142,-4.612 4.612,4.612 z"
                                   style="fill:#f92672;fill-rule:evenodd;stroke:none;stroke-width:0.92240000000000000pt;stroke-opacity:1;fill-opacity:1" />
                              </g>
                              <g
                                 id="g12205"
                                 style="stroke:none;stroke-opacity:1;fill:#f92672;fill-opacity:1">
                                <path
                                   style="font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:normal;letter-spacing:normal;word-spacing:normal;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;baseline-shift:baseline;color:#000000;fill:#f92672;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:2.30599999;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Sans;-inkscape-font-specification:Sans"
                                   d="m 236.4375,308.15625 -54.21875,0.125 -0.15625,0 -0.15625,0 c -0.60541,0 -1.15625,0.55084 -1.15625,1.15625 0,0.60541 1.76166,1.15625 1.15625,1.15625 l 0.15625,0 0.15625,0 54.21875,-0.125 c 0.60541,0 1.15625,-0.55084 1.15625,-1.15625 0,-0.60541 -0.55084,-1.15625 -1.15625,-1.15625 z"
                                   id="path4121-0"
                                   inkscape:connector-curvature="0"
                                   sodipodi:nodetypes="cccssscccsc" />
                                <path
                                   inkscape:connector-curvature="0"
                                   id="path12211"
                                   d="m 185.14122,309.44452 4.612,-4.612 -16.142,4.612 16.142,4.612 -4.612,-4.612 z"
                                   style="fill:#f92672;fill-rule:evenodd;stroke:none;stroke-width:0.92240000000000000pt;stroke-opacity:1;fill-opacity:1" />
                              </g>
                            </g>
                            <rect
                               y="115.77353"
                               x="239.18253"
                               height="272.99771"
                               width="73.753418"
                               id="rect3212-2"
                               style="fill:#000000;fill-opacity:1;stroke:#ffffff;stroke-width:3;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />
                            <path
                               inkscape:connector-curvature="0"
                               id="path4121-1"
                               d="m 500.82118,320.47512 60.20947,0.13322 0.15649,0 0.15646,0"
                               style="fill:none;stroke:#ffffff;stroke-width:2.30599999;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;marker-start:none;marker-mid:none;marker-end:url(#Arrow1Mend5)" />
                            <path
                               inkscape:connector-curvature="0"
                               id="path4121-0-3"
                               d="m 564.83906,328.69368 -60.20947,0.13322 -0.15649,0 -0.15646,0"
                               style="fill:none;stroke:#ffffff;stroke-width:2.30599999;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;marker-start:none;marker-end:url(#Arrow1Mend-1n)" />
                            <rect
                               y="115.77353"
                               x="94.978081"
                               height="272.99771"
                               width="73.753418"
                               id="rect3212"
                               style="fill:#000000;fill-opacity:1;stroke:#ffffff;stroke-width:3;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />
                            <rect
                               y="115.77353"
                               x="383.38696"
                               height="272.99771"
                               width="73.753418"
                               id="rect3212-2-3"
                               style="fill:#000000;fill-opacity:1;stroke:#ffffff;stroke-width:3;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />
                          </g>
                        </svg>
                    </div>

                    <aside class="notes">
                        <ul>
                            <li>Install nameko today, you get all tools you write services that communicate with RPC or Pub-Sub over AMQP</li>
                        </ul>
                    </aside>
                </section>

                <section>
                    <h2>Definitions</h2>
                    <ul>
                        <li>Entrypoints</li>
                        <ul>
                            <li>To interact with a service</li>
                        </ul>
                        <li>Dependencies</li>
                        <ul>
                            <li>For the service to interact with external things</li>
                        </ul>
                    </ul>

                    <aside class="notes">
                        <ul>
                            <li>Set of entrypoints and dependencies comprise the interface for the service</li>
                            <li>Anything external to a service should be accessed via dependency</li>
                            <li>For example:
                                <ul>
                                    <li>Proxies to call other services over RPC</li>
                                    <li>Publishers to send messages to subscribers</li>
                                    <li>Anything that persists state, such as a database</li>
                                    <li>Really any I/O</li>
                                </ul>
                            </li>
                        </ul>
                    </aside>
                </section>

                <section>
                    <h2>Example Service</h2>
                    <div>
                        <pre><code class="python" data-trim>
from nameko.rpc import rpc
from .dependencies import database_connection


class HelloService(object):

    database = database_connection(DB_URI)

    @rpc
    def hello(self, name):
        self.database.add(name)
        return "Hello, {}".format(name)
                        </code></pre>
                    </div>
                    <aside class="notes">
                        <ul>
                            <li>Service is implemented as a class</li>
                            <li>One entrypoint: built-in @rpc decorator</li>
                            <li>One dependency declaration: database</li>
                        </ul>
                        <p>There is a difference between the class variable 'database' and the instance variable 'database' (we'll come onto that)</p>
                    </aside>
                </section>

                <section>
                    <h2>Running HelloService</h2>
                    <div>
                        <pre><code class="python" data-trim>
from nameko.containers import ServiceContainer

config = {'AMQP_URI': 'amqp://guest:guest@localhost:5672/'}
container = ServiceContainer(HelloService, ..., config)
container.start()
...
                        </code></pre>
                    </div>
                    <aside class="notes">
                        <ul>
                            <li>Every service class is hosted by a ServiceContainer</li>
                            <li>Container is responsible for discovering and managing entrypoints & dependencies</li>
                            <li>Entrypoint  starts listening for RPC calls on container.start()</li>
                        </ul>
                    </aside>
                </section>

                <section>
                    <h2>Worker Lifecycle</h2>
                    <div class="container">
                        <div class="third">
                            <ol style="margin-top: 20px">
                            	<li>Entrypoint "fires"</li>
                            	<li>Worker created</li>
                            	<li>Dependencies injected</li>
                            	<li>Execute method</li>
                            	<li>Discard worker</li>
                            </ol>
                        </div>
                        <div class="twothirds" style="padding-top: 35px">
                            <pre class="fragment"><code class="python" data-trim>
                            	worker_instance = HelloService()
                            </code></pre>
                            <pre class="fragment"><code class="python" data-trim>
                            	worker_instance.database = HelloService.database.inject()
                            </code></pre>
                            <pre class="fragment"><code class="python" data-trim>
                            	result = worker_instance.hello(name)
                            </code></pre>
                            <pre class="fragment"><code class="python" data-trim>
                            	del worker_instance
                            </code></pre>
                        </div>
                    </div>
                    <aside class="notes">
                        <ul>
                            <li>Someone calls the 'hello' method over RPC, and the entrypoint fires</li>
                            <li>Kicks off the worker lifecycle</li>
                            <li>Python code on the right roughly analagous to container</li>
                            <li>Container creates a worker by instantiating the service class</li>
                            <li>Dependency declarations replaced with injections, provided by the dependency implementation</li>
                            <li>So inside hello() method, ``self.database`` is a real database session (alluded to in the previous slide)</li>
                            <li>The worker only lives for one entrypoint call; you can't save state onto 'self'</li>
                        </ul>
                    </aside>
                </section>

                <section>
                    <h2>Why do it this way?</h2>
                    <div class="container">
                        <div class="third">
                            <ul>
                            	<li style="margin-top: 70px;">Simple service logic</li>
                            	<li style="margin-top: 30px;">Complex application</li>
                            </ul>
                        </div>
                        <div class="twothirds">
                            <pre><code class="python" data-trim>
from nameko.rpc import rpc
from .dependencies import database_connection


class HelloService(object):

    database = database_connection(DB_URI)

    @rpc
    def hello(self, name):
        self.database.add(name)
        return "Hello, {}".format(name)
                            </code></pre>
                        </div>
                        <div style="position: relative; top: 30px" class="fragment">
                        <p>Separation of concerns</p>
                    </div>
                    <aside class="notes">
                        <ul>
                            <li>Why push all the stateful changes into dependencies?</li>
                            <li>Distills service logic down to its essence</li>
                            <li>Even though service simple, application quite complex</li>
                            <li>It doesn't matter to the service dev how the database write works, or RPC.</li>
                            <li>These should be written once, elsewhere</li>
                        </ul>
                        <ul>
                            <li>Separation of concerns good simplying individual services; scaling teams and also.. testing</li>
                        </ul>
                    </aside>
                </section>

                <section>
                    <h2>Unit Testing</h2>
                    <h3>Testing a service in isolation</h3>
                        <pre class="fragment"><code class="python" data-trim>
from mock import call
from nameko.testing.services import worker_factory

hello_svc = worker_factory(HelloService)

assert hello_svc.hello("Matt") == "Hello, Matt"
assert hello_svc.database.add.call_args_list == [call("Matt")]
                        </code></pre>

                        <pre class="fragment"><code class="python" data-trim>
from nameko.testing.services import worker_factory

database = set()
hello_svc = worker_factory(HelloService, database=database)

assert hello_svc.hello("Matt") == "Hello, Matt"
assert database == {"Matt"}
                        </code></pre>

                        <aside class="notes">
                        <ul>
                            <li>A good unit test assumes dependencies are independently tested</li>
                            <li>Which means we only have to cover the simple service logic</li>
                            <li>Nameko provides a tool to make this easy -worker factory</li>
                        </ul>
                        <ul>
                            <li>The worker_factory replaces steps 2 and 3 in the worker lifecycle; that is, it instantiates the service class and (by default) replaces all injections with Mock objects</li>
                            <li>So this is the full unit test: call, assert, verify mock calls</li>
                        </ul>
                        <ul>
                            <li>Alternatively you can provide your own replacement injections...</li>
                            <li>We use this pattern when testing with a database, because it's easier to let sqlalchemy write to the db and inspect that.</li>
                        </ul>
                    </aside>
                </section>

                <section>
                    <h2>Integration Testing</h2>
                    <h3>Testing a service with something else</h3>

                    <div style="margin-top: 50px">
                        <ul>
                            <li>Host services the "normal" way</li>
                            <li>Restrict scope of interaction through dependencies</li>
                        </ul>
                    </div>
                    <aside class="notes">
                        <ul>
                            <li>The recommended integration test pattern is to host a set services in the "normal" way and then tickle their entrypoints and verify the reaction</li>
                            <li>But we usually want to concentrate on particular integration points</li>
                            <li>Nameko provides tools to limit the interaction of services whatever with they're integrating against</li>
                        </ul>
                    </aside>
                </section>

                <section>
                    <h2>Replace Injections</h2>

                    <pre><code class="python" data-trim>
from nameko.testing.services import replace_injections

container = ServiceContainer(BookingService, ...)
publisher_mock = replace_injections(container, "homes_publisher")

container.start()
...
                    </code></pre>
                    <div style="margin: 50px">
                        <svg
                           xmlns:dc="http://purl.org/dc/elements/1.1/"
                           xmlns:cc="http://creativecommons.org/ns#"
                           xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                           xmlns:svg="http://www.w3.org/2000/svg"
                           xmlns="http://www.w3.org/2000/svg"
                           xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
                           xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
                           width="846.26379"
                           height="325.62"
                           id="svg2"
                           version="1.1"
                           inkscape:version="0.48.5 r10040"
                           sodipodi:docname="matt.svg">
                          <sodipodi:namedview
                             id="base"
                             pagecolor="#000000"
                             bordercolor="#666666"
                             borderopacity="1.0"
                             inkscape:pageopacity="0.39215686"
                             inkscape:pageshadow="2"
                             inkscape:zoom="34.224664"
                             inkscape:cx="299.3139"
                             inkscape:cy="128.18486"
                             inkscape:document-units="px"
                             inkscape:current-layer="layer1"
                             showgrid="false"
                             inkscape:window-width="1791"
                             inkscape:window-height="1132"
                             inkscape:window-x="1982"
                             inkscape:window-y="62"
                             inkscape:window-maximized="0"
                             showguides="true"
                             inkscape:guide-bbox="true"
                             fit-margin-top="0"
                             fit-margin-left="0"
                             fit-margin-right="0"
                             fit-margin-bottom="0">
                            <sodipodi:guide
                               id="guide3030"
                               position="413.62533,342.39201"
                               orientation="0,1" />
                            <sodipodi:guide
                               id="guide3032"
                               position="71.473101,464.81348"
                               orientation="1,0" />
                          </sodipodi:namedview>
                          <defs
                             id="defs4">
                            <marker
                               inkscape:stockid="Arrow2Lend"
                               orient="auto"
                               refY="0"
                               refX="0"
                               id="Arrow2Lend"
                               style="overflow:visible">
                              <path
                                 id="path4328"
                                 style="fill-rule:evenodd;stroke-width:0.625;stroke-linejoin:round"
                                 d="M 8.7185878,4.0337352 -2.2072895,0.01601326 8.7185884,-4.0017078 c -1.7454984,2.3720609 -1.7354408,5.6174519 -6e-7,8.035443 z"
                                 transform="matrix(-1.1,0,0,-1.1,-1.1,0)"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               inkscape:stockid="Tail"
                               orient="auto"
                               refY="0"
                               refX="0"
                               id="Tail"
                               style="overflow:visible">
                              <g
                                 id="g4343"
                                 transform="scale(-1.2,-1.2)">
                                <path
                                   id="path4345"
                                   d="M -3.8048674,-3.9585227 0.54352094,0"
                                   style="fill:none;stroke:#000000;stroke-width:0.80000001;stroke-linecap:round"
                                   inkscape:connector-curvature="0" />
                                <path
                                   id="path4347"
                                   d="M -1.2866832,-3.9585227 3.0617053,0"
                                   style="fill:none;stroke:#000000;stroke-width:0.80000001;stroke-linecap:round"
                                   inkscape:connector-curvature="0" />
                                <path
                                   id="path4349"
                                   d="M 1.3053582,-3.9585227 5.6537466,0"
                                   style="fill:none;stroke:#000000;stroke-width:0.80000001;stroke-linecap:round"
                                   inkscape:connector-curvature="0" />
                                <path
                                   id="path4351"
                                   d="M -3.8048674,4.1775838 0.54352094,0.21974226"
                                   style="fill:none;stroke:#000000;stroke-width:0.80000001;stroke-linecap:round"
                                   inkscape:connector-curvature="0" />
                                <path
                                   id="path4353"
                                   d="M -1.2866832,4.1775838 3.0617053,0.21974226"
                                   style="fill:none;stroke:#000000;stroke-width:0.80000001;stroke-linecap:round"
                                   inkscape:connector-curvature="0" />
                                <path
                                   id="path4355"
                                   d="M 1.3053582,4.1775838 5.6537466,0.21974226"
                                   style="fill:none;stroke:#000000;stroke-width:0.80000001;stroke-linecap:round"
                                   inkscape:connector-curvature="0" />
                              </g>
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Sstart"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Sstart">
                              <path
                                 transform="matrix(0.2,0,0,0.2,1.2,0)"
                                 style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path4319"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend">
                              <path
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path4316"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Lend"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Lend">
                              <path
                                 transform="matrix(-0.8,0,0,-0.8,-10,0)"
                                 style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path4310"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend-0"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend">
                              <path
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path4316-9"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend-1"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend">
                              <path
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path4316-5"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend5"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend5">
                              <path
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6345"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend-1n"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend-1n">
                              <path
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6415"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1MendC"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1MendC">
                              <path
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6486"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend5-2"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend5">
                              <path
                                 inkscape:connector-curvature="0"
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6345-2" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1MendC-6"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1MendC">
                              <path
                                 inkscape:connector-curvature="0"
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6486-6" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1MendC-9"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1MendC">
                              <path
                                 inkscape:connector-curvature="0"
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6486-4" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend-1n-8"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend-1n">
                              <path
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6415-5"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend5-1"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend5">
                              <path
                                 inkscape:connector-curvature="0"
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6345-5" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend-1n-4"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend-1n">
                              <path
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6415-0"
                                 inkscape:connector-curvature="0" />
                            </marker>
                            <marker
                               style="overflow:visible"
                               id="Arrow1Mend5-8"
                               refX="0"
                               refY="0"
                               orient="auto"
                               inkscape:stockid="Arrow1Mend5">
                              <path
                                 transform="matrix(-0.4,0,0,-0.4,-4,0)"
                                 style="fill:#ffffff;fill-rule:evenodd;stroke:#ffffff;stroke-width:1pt"
                                 d="M 0,0 5,-5 -12.5,0 5,5 0,0 z"
                                 id="path6345-8"
                                 inkscape:connector-curvature="0" />
                            </marker>
                          </defs>
                          <metadata
                             id="metadata7">
                            <rdf:RDF>
                              <cc:Work
                                 rdf:about="">
                                <dc:format>image/svg+xml</dc:format>
                                <dc:type
                                   rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
                                <dc:title />
                              </cc:Work>
                            </rdf:RDF>
                          </metadata>
                          <g
                             transform="translate(148.90204,-101.27237)"
                             id="layer1"
                             inkscape:groupmode="layer"
                             inkscape:label="Layer 1">
                            <text
                               sodipodi:linespacing="125%"
                               id="text3270"
                               y="415.14822"
                               x="90.405571"
                               style="font-size:40px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#ffffff;fill-opacity:1;stroke:none;font-family:Sans"
                               xml:space="preserve"><tspan
                                 style="font-size:22px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;writing-mode:lr-tb;text-anchor:start;fill:#ffffff;fill-opacity:1;stroke:none;font-family:'Open Sans';-inkscape-font-specification:Sans"
                                 y="422.14822"
                                 x="84.405571"
                                 id="tspan3272"
                                 sodipodi:role="line">Bookings</tspan></text>
                            <text
                               sodipodi:linespacing="125%"
                               id="text3270-9"
                               y="415.14822"
                               x="230.61002"
                               style="font-size:40px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#ffffff;fill-opacity:1;stroke:none;font-family:Sans"
                               xml:space="preserve"><tspan
                                 style="font-size:22px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;writing-mode:lr-tb;text-anchor:start;fill:#ffffff;fill-opacity:1;stroke:none;font-family:'Open Sans';-inkscape-font-specification:Sans"
                                 y="422.14822"
                                 x="225.61002"
                                 id="tspan3272-5"
                                 sodipodi:role="line">Payments</tspan></text>
                            <text
                               sodipodi:linespacing="125%"
                               id="text3270-9-7"
                               y="415.14822"
                               x="390.81445"
                               style="font-size:40px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#ffffff;fill-opacity:1;stroke:none;font-family:Sans"
                               xml:space="preserve"><tspan
                                 style="font-size:22px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;writing-mode:lr-tb;text-anchor:start;fill:#ffffff;fill-opacity:1;stroke:none;font-family:'Open Sans';-inkscape-font-specification:Sans"
                                 y="422.14822"
                                 x="384.81445"
                                 id="tspan3272-5-5"
                                 sodipodi:role="line">Homes</tspan></text>
                            <rect
                               y="287.93564"
                               x="55.899776"
                               height="71.664482"
                               width="441.41971"
                               id="rect3345"
                               style="fill:none;stroke:#ffffff;stroke-width:3;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:12, 6;stroke-dashoffset:0" />
                            <g
                               id="g12213"
                               style="stroke:none;fill:#a6e22e;fill-opacity:0.2">
                              <path
                                 style="font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:normal;letter-spacing:normal;word-spacing:normal;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;baseline-shift:baseline;color:#000000;fill:#a6e22e;fill-opacity:0.2;stroke:none;stroke-width:2.18305445;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Sans;-inkscape-font-specification:Sans"
                                 d="m 370.8125,339.96875 -198.15625,0.125 c -0.57269,0 -1.09375,0.52106 -1.09375,1.09375 0,0.57269 0.52106,1.09375 1.09375,1.09375 l 198.15625,-0.125 0.53125,0 0.53125,0 c 0.57269,0 7.09375,-0.52106 7.09375,-1.09375 0,-0.57269 -6.52106,-1.09375 -7.09375,-1.09375 l -0.53125,0 z"
                                 id="path4121-5"
                                 inkscape:connector-curvature="0"
                                 sodipodi:nodetypes="ccscccssscc" />
                              <path
                                 inkscape:connector-curvature="0"
                                 id="path12219"
                                 d="m 369.14409,341.05138 -4.36611,4.36611 15.28138,-4.36611 -15.28138,-4.36611 4.36611,4.36611 z"
                                 style="fill:#a6e22e;fill-rule:evenodd;stroke:none;stroke-width:0.87322177999999984pt;fill-opacity:0.2" />
                            </g>
                            <path
                               inkscape:connector-curvature="0"
                               id="path4959"
                               d="m 617.25575,286.93009 c 8.69078,0 15.94018,5.27341 17.83933,12.36292 5.08076,-5.04389 11.85776,-8.11387 19.27962,-8.11387 13.0704,0 24.06321,9.55253 27.4665,22.57871 4.1e-4,7.4e-4 0.0248,-7.4e-4 0.0252,0 7.92701,1.44378 13.69535,5.77686 13.69535,10.89384 0,5.49493 -6.62819,10.08474 -15.46412,11.16506 -4.63122,10.37001 -14.40911,17.51601 -25.723,17.51601 -5.35296,0 -10.37256,-1.6001 -14.65554,-4.38464 -2.53665,3.49818 -7.56027,5.89894 -13.36687,5.89894 -6.40505,0 -11.86649,-2.90921 -14.07437,-7.00641 -3.62293,1.43593 -7.63296,2.23753 -11.85077,2.23753 -16.17097,0 -29.28581,-11.73067 -29.28581,-26.19493 0,-14.30341 12.83258,-25.91556 28.75518,-26.17233 2.48661,-6.28233 9.32541,-10.78083 17.35923,-10.78083 z"
                               style="fill:none;stroke:#ffffff;stroke-width:3.5999999;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />
                            <g
                               id="g11565"
                               style="fill:#f92672;fill-opacity:1;stroke:#f92672;stroke-opacity:1">
                              <g
                                 id="g12197"
                                 style="stroke:none;stroke-opacity:1;fill:#f92672;fill-opacity:1">
                                <path
                                   style="font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:normal;letter-spacing:normal;word-spacing:normal;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;baseline-shift:baseline;color:#000000;fill:#f92672;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:2.30599999;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Sans;-inkscape-font-specification:Sans"
                                   d="m 172.3125,299.9375 c -0.60596,0.0237 -1.1355,0.59724 -1.11095,1.20316 0.0246,0.60593 0.59876,1.1347 1.20465,1.10934 l 54.21875,0.125 0.15625,0 0.15625,0 c 0.60541,0 1.15625,-0.55084 1.15625,-1.15625 0,-0.60541 -1.76166,-1.15625 -1.15625,-1.15625 l -0.15625,0 -0.15625,0 -54.1875,-0.125 c -0.0416,-0.002 -0.0834,-0.002 -0.125,0 z"
                                   id="path4121"
                                   inkscape:connector-curvature="0"
                                   sodipodi:nodetypes="cscccsssccccc" />
                                <path
                                   inkscape:connector-curvature="0"
                                   id="path12203"
                                   d="m 223.72018,301.22596 -4.612,4.612 16.142,-4.612 -16.142,-4.612 4.612,4.612 z"
                                   style="fill:#f92672;fill-rule:evenodd;stroke:none;stroke-width:0.92240000000000000pt;stroke-opacity:1;fill-opacity:1" />
                              </g>
                              <g
                                 id="g12205"
                                 style="stroke:none;stroke-opacity:1;fill:#f92672;fill-opacity:1">
                                <path
                                   style="font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:normal;letter-spacing:normal;word-spacing:normal;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;baseline-shift:baseline;color:#000000;fill:#f92672;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:2.30599999;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Sans;-inkscape-font-specification:Sans"
                                   d="m 236.4375,308.15625 -54.21875,0.125 -0.15625,0 -0.15625,0 c -0.60541,0 -1.15625,0.55084 -1.15625,1.15625 0,0.60541 1.76166,1.15625 1.15625,1.15625 l 0.15625,0 0.15625,0 54.21875,-0.125 c 0.60541,0 1.15625,-0.55084 1.15625,-1.15625 0,-0.60541 -0.55084,-1.15625 -1.15625,-1.15625 z"
                                   id="path4121-0"
                                   inkscape:connector-curvature="0"
                                   sodipodi:nodetypes="cccssscccsc" />
                                <path
                                   inkscape:connector-curvature="0"
                                   id="path12211"
                                   d="m 185.14122,309.44452 4.612,-4.612 -16.142,4.612 16.142,4.612 -4.612,-4.612 z"
                                   style="fill:#f92672;fill-rule:evenodd;stroke:none;stroke-width:0.92240000000000000pt;stroke-opacity:1;fill-opacity:1" />
                              </g>
                            </g>
                            <rect
                               y="115.77353"
                               x="239.18253"
                               height="272.99771"
                               width="73.753418"
                               id="rect3212-2"
                               style="fill:#000000;fill-opacity:1;stroke:#ffffff;stroke-width:3;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />
                            <path
                               inkscape:connector-curvature="0"
                               id="path4121-1"
                               d="m 500.82118,320.47512 60.20947,0.13322 0.15649,0 0.15646,0"
                               style="fill:none;stroke:#ffffff;stroke-width:2.30599999;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;marker-start:none;marker-mid:none;marker-end:url(#Arrow1Mend5)" />
                            <path
                               inkscape:connector-curvature="0"
                               id="path4121-0-3"
                               d="m 564.83906,328.69368 -60.20947,0.13322 -0.15649,0 -0.15646,0"
                               style="fill:none;stroke:#ffffff;stroke-width:2.30599999;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;marker-start:none;marker-end:url(#Arrow1Mend-1n)" />
                            <rect
                               y="115.77353"
                               x="94.978081"
                               height="272.99771"
                               width="73.753418"
                               id="rect3212"
                               style="fill:#000000;fill-opacity:1;stroke:#ffffff;stroke-width:3;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" />
                            <rect
                               y="115.77353"
                               x="383.38696"
                               height="272.99771"
                               width="73.753418"
                               id="rect3212-2-3"
                               style="fill:#000000;fill-opacity:0.2;stroke:#ffffff;stroke-width:3;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:0.2;stroke-dasharray:none" />
                          </g>
                        </svg>
                    </div>
                    <aside class="notes">
                        <ul>
                            <li>One of these is replace_injections</li>
                            <li>Similar pattern to the worker factory, but for running services</li>
                            <li>Lets you remove dependencies and replace them with mocks</li>
                            <li>In our example of (Bookings, Payments, Homes), we can replace the publisher on the Bookings service to remove Payments service from the test setup.</li>
                            <li>replace_injections returns the mocks that it uses as replacements, so you can set up expected return values or verify that they were called correctly</li>
                        </ul>
                    </aside>
                </section>

               <section>
                    <h2>Worker Lifecycle</h2>
                    <p>All dependencies participate</p>
                    <ul>
                    	<li>worker setup</li>
                    	<li>worker result</li>
                    	<li>worker teardown</li>
                    </ul>
                    <aside class="notes">
                        <ul>
                            <li>Any interested dependency can implement code to run at each of these lifecycle stages</li>
                            <li>Nice decoupling</li>
                            <li>If you wanted to write autocommit, this would be the place</li>
                        </ul>
                    </aside>
                </section>

               <section>
                    <h2>Nice Examples</h2>
                    <ul>
                    	<li>Log Aggregator</li>
                    	<li>Sentry Reporter</li>
                    	<li>Statsd Monitor</li>
                    </ul>
              <aside class="notes">
						<ul>
							<li>These hooks let you add some functionality in a nicely decoupled way</li>
							<li>At onefinestay we have all three of these; provide reporting on all entrypoints that fire</li>
							<li>They were written once and now come for free with every new service</li>
						</ul>
                    </aside>
                </section>

                <section>
                    <h2>Summary</h2>
                    <div class="sunmary">
                        <ul>
                            <li>Dependency Injection</li>
                            <ul>
                                <li>Simple idea</li>
                                <li>Separation of concerns</li>
                            </ul>
                            <li>Nameko</li>
                            <ul>
                                <li>Encourages explicit dependencies</li>
                                <li>Provides nice testing tools</li>
                                <li>And other goodies...</li>
                            </ul>
                        </ul>
                    </div>
                    <p class="">Nameko Workshop -- Tomorrow 10:20, MADE room</p>
                </section>

                <section>
                    <h2>Thanks!</h2>
                    <h3>Questions?</h3>
                    <p style="position: relative; top: 50px">
                        https://github.com/onefinestay/nameko
                    </p>
                    <small style="position: relative; top: 200px">
                        P.S. onefinestay are hiring...
                    </small>
                </section>

            </div>

        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.min.js"></script>

        <script>

            // Full list of configuration options available here:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: false,
                progress: true,
                history: false,
                center: true,
                keyboard: true,

                theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
                transition: Reveal.getQueryHash().transition || 'linear', // default/cube/page/concave/zoom/linear/fade/none

                // Parallax scrolling
                // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
                // parallaxBackgroundSize: '2100px 900px',

                // Optional libraries used to extend on reveal.js
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
                    { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
                ]
            });

        </script>

    </body>
</html>
